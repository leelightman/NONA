!function(){"use strict";var e,a=(function(d,l){!function(e){var n=l,t=d&&d.exports==n&&d,r="object"==typeof global&&global;r.global!==r&&r.window!==r||(e=r);function o(e){this.message=e}(o.prototype=new Error).name="InvalidCharacterError";function u(e){throw new o(e)}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=/[\t\n\f\r ]/g,i={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var n,t,r,o,i=e.length%3,s="",a=-1,d=e.length-i;++a<d;)n=e.charCodeAt(a)<<16,t=e.charCodeAt(++a)<<8,r=e.charCodeAt(++a),s+=c.charAt((o=n+t+r)>>18&63)+c.charAt(o>>12&63)+c.charAt(o>>6&63)+c.charAt(63&o);return 2==i?(n=e.charCodeAt(a)<<8,t=e.charCodeAt(++a),s+=c.charAt((o=n+t)>>10)+c.charAt(o>>4&63)+c.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(a),s+=c.charAt(o>>2)+c.charAt(o<<4&63)+"=="),s},decode:function(e){var n=(e=String(e).replace(a,"")).length;n%4==0&&(n=(e=e.replace(/==?$/,"")).length),n%4!=1&&!/[^+a-zA-Z0-9/]/.test(e)||u("Invalid character: the string to be decoded is not correctly encoded.");for(var t,r,o=0,i="",s=-1;++s<n;)r=c.indexOf(e.charAt(s)),t=o%4?64*t+r:r,o++%4&&(i+=String.fromCharCode(255&t>>(-2*o&6)));return i},version:"0.1.0"};if(n&&!n.nodeType)if(t)t.exports=i;else for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);else e.base64=i}(this)}(e={exports:{}},e.exports),e.exports),n={1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(e){return e.maxVendorId},validator:function(e){return!e.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(e){return e.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(e){return e.isRange}},{name:"vendorRangeList",type:"list",listCount:function(e){return e.numEntries},validator:function(e){return e.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(e){return e.isRange}}]}]}},d=6,u=n;function t(e,n){for(var t=1<arguments.length&&void 0!==n?n:"0",r="",o=0;o<e;o+=1)r+=t;return r}function c(e,n){return t(Math.max(0,n))+e}function l(e,n){return e+t(Math.max(0,n))}function f(e,n){var t="";return"number"!=typeof e||isNaN(e)||(t=parseInt(e,10).toString(2)),n>=t.length&&(t=c(t,n-t.length)),t.length>n&&(t=t.substring(0,n)),t}function p(e){return f(!0===e?1:0,1)}function v(e,n){return e instanceof Date?f(e.getTime()/100,n):f(e,n)}function r(e,n){return f(e.toUpperCase().charCodeAt(0)-65,n)}function h(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:12;return r(e.slice(0,1),n/2)+r(e.slice(1),n/2)}function m(e,n,t){return parseInt(e.substr(n,t),2)}function g(e,n,t){return new Date(100*m(e,n,t))}function w(e,n){return 1===parseInt(e.substr(n,1),2)}function o(e){var n=m(e);return String.fromCharCode(n+65).toLowerCase()}function y(e,n,t){var r=e.substr(n,t);return o(r.slice(0,t/2))+o(r.slice(t/2))}function i(e){var n=e.input,t=e.field,r=t.name,o=t.type,i=t.numBits,s=t.encoder,a=t.validator;if("function"==typeof a&&!a(n))return"";if("function"==typeof s)return s(n);var d="function"==typeof i?i(n):i,u=n[r],c=null==u?"":u;switch(o){case"int":return f(c,d);case"bool":return p(c);case"date":return v(c,d);case"bits":return l(c,d-c.length).substring(0,d);case"list":return c.reduce(function(e,n){return e+C({input:n,fields:t.fields})},"");case"language":return h(c,d);default:throw new Error("ConsentString - Unknown field type "+o+" for encoding")}}function C(e){var t=e.input;return e.fields.reduce(function(e,n){return e+=i({input:t,field:n})},"")}function I(e){var n=e.input,t=e.output,r=e.startPosition,o=e.field,i=o.type,s=o.numBits,a=o.decoder,d=o.validator,u=o.listCount;if("function"==typeof d&&!d(t))return{newPosition:r};if("function"==typeof a)return a(n,t,r);var c="function"==typeof s?s(t):s;switch(i){case"int":return{fieldValue:m(n,r,c)};case"bool":return{fieldValue:w(n,r)};case"date":return{fieldValue:g(n,r,c)};case"bits":return{fieldValue:n.substr(r,c)};case"list":return function(e,n,t,r,o){var i=0;"function"==typeof o?i=o(n):"number"==typeof o&&(i=o);for(var s=t,a=[],d=0;d<i;d+=1){var u=V({input:e,fields:r.fields,startPosition:s});s=u.newPosition,a.push(u.decodedObject)}return{fieldValue:a,newPosition:s}}(n,t,r,o,u);case"language":return{fieldValue:y(n,r,c)};default:throw new Error("ConsentString - Unknown field type "+i+" for decoding")}}function V(e){var a=e.input,n=e.fields,t=e.startPosition,d=void 0===t?0:t;return{decodedObject:n.reduce(function(e,n){var t=n.name,r=n.numBits,o=I({input:a,output:e,startPosition:d,field:n}),i=o.fieldValue,s=o.newPosition;return void 0!==i&&(e[t]=i),void 0!==s?d=s:"number"==typeof r&&(d+=r),e},{}),newPosition:d}}function s(e,n){var t=e.version;if("number"!=typeof t)throw new Error("ConsentString - No version field to encode");if(n[t])return C({input:e,fields:n[t].fields});throw new Error("ConsentString - No definition for version "+t)}var b=l,S=function(e){var n=s(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:u);if(n){for(var t=l(n,7-(n.length+7)%8),r="",o=0;o<t.length;o+=8)r+=String.fromCharCode(parseInt(t.substr(o,8),2));return a.encode(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}return null},A=function(e){return e.split("").reduce(function(e,n,t){return"1"===n&&-1===e.indexOf(t+1)&&e.push(t+1),e},[])},L=function(e,n){for(var t=e;t.length%4!=0;)t+="=";t=t.replace(/-/g,"+").replace(/_/g,"/");for(var r=a.decode(t),o="",i=0;i<r.length;i+=1){var s=r.charCodeAt(i).toString(2);o+=c(s,8-s.length)}return function(e,n){var t=1<arguments.length&&void 0!==n?n:u,r=m(e,0,d);if("number"!=typeof r)throw new Error("ConsentString - Unknown version number in the string to decode");if(!u[r])throw new Error("ConsentString - Unsupported version "+r+" in the string to decode");return V({input:e,fields:t[r].fields}).decodedObject}(o,n)},P=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},k=S,x=b;function O(e){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t="",r=1;r<=e;r+=1)t+=-1!==n.indexOf(r)?"1":"0";return x(t,Math.max(0,e-t.length))}function B(e){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Set,t=0,r=0;r<e.length;r+=1)t=Math.max(t,e[r].id);for(var o=0;o<n.length;o+=1)t=Math.max(t,n[o]);for(var i="",s=1;s<=t;s+=1)i+=-1!==n.indexOf(s)?"1":"0";return i}function R(e,n){for(var t=[],r=[],o=e.map(function(e){return e.id}),i=0;i<e.length;i+=1){var s=e[i].id;if(-1!==n.indexOf(s)&&t.push(s),(-1===n.indexOf(s)||i===e.length-1||-1===o.indexOf(s+1))&&t.length){var a=t.shift(),d=t.pop();t=[],r.push({isRange:"number"==typeof d,startVendorId:a,endVendorId:d})}}return r}function _(e){var n=0;return e.forEach(function(e){e.id>n&&(n=e.id)}),n}var E=function(e){var n=e.maxVendorId,t=e.vendorList,r=void 0===t?{}:t,o=e.allowedPurposeIds,i=e.allowedVendorIds,s=r.vendors,a=void 0===s?[]:s,d=r.purposes,u=void 0===d?[]:d;n=n||_(a);var c=k(P({},e,{maxVendorId:n,purposeIdBitString:B(u,o),isRange:!1,vendorIdBitString:O(n,i)})),l=R(a,i),f=k(P({},e,{maxVendorId:n,purposeIdBitString:B(u,o),isRange:!0,defaultConsent:!1,numEntries:l.length,vendorRangeList:l}));return c.length<f.length?c:f},M=A,U=L;var T=function(e){var n=U(e),t=n.version,r=n.cmpId,o=n.vendorListVersion,i=n.purposeIdBitString,s=n.maxVendorId,a=n.created,d=n.lastUpdated,u=n.isRange,c=n.defaultConsent,l=n.vendorIdBitString,f=n.vendorRangeList,p=n.cmpVersion,v=n.consentScreen,h=n.consentLanguage,m={version:t,cmpId:r,vendorListVersion:o,allowedPurposeIds:M(i),maxVendorId:s,created:a,lastUpdated:d,cmpVersion:p,consentScreen:v,consentLanguage:h};if(u){var g=f.reduce(function(e,n){for(var t=n.isRange,r=n.startVendorId,o=n.endVendorId,i=t?o:r,s=r;s<=i;s+=1)e[s]=!0;return e},{});m.allowedVendorIds=[];for(var w=1;w<=s;w+=1)(c&&!g[w]||!c&&g[w])&&-1===m.allowedVendorIds.indexOf(w)&&m.allowedVendorIds.push(w)}else m.allowedVendorIds=M(l);return m},Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function j(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=E,D=_,N=O,q=B,z=T,G=n,$=/^[a-z]{2}$/;function Y(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,Y),this.created=new Date,this.lastUpdated=new Date,this.version=1,this.vendorList=null,this.vendorListVersion=null,this.cmpId=null,this.cmpVersion=null,this.consentScreen=null,this.consentLanguage=null,this.allowedPurposeIds=[],this.allowedVendorIds=[],e&&Object.assign(this,z(e))}var Z,H={ConsentString:{ConsentString:(function(e,n,t){return n&&j(e.prototype,n),t&&j(e,t),e}(Y,[{key:"getConsentString",value:function(e){var n=!(0<arguments.length&&void 0!==e)||e;if(!this.vendorList)throw new Error("ConsentString - A vendor list is required to encode a consent string");return!0===n&&(this.lastUpdated=new Date),F({version:this.getVersion(),vendorList:this.vendorList,allowedPurposeIds:this.allowedPurposeIds,allowedVendorIds:this.allowedVendorIds,created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,consentLanguage:this.consentLanguage,vendorListVersion:this.vendorListVersion})}},{key:"getMaxVendorId",value:function(){return D(this.vendorList.vendors)}},{key:"getParsedVendorConsents",value:function(){return N(D(this.vendorList.vendors),this.allowedVendorIds)}},{key:"getParsedPurposeConsents",value:function(){return q(this.vendorList.purposes,this.allowedPurposeIds)}},{key:"getMetadataString",value:function(){return F({version:this.getVersion(),created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,vendorListVersion:this.vendorListVersion})}},{key:"getVersion",value:function(){return this.version}},{key:"getVendorListVersion",value:function(){return this.vendorListVersion}},{key:"setGlobalVendorList",value:function(e){if("object"!==(void 0===e?"undefined":Q(e)))throw new Error("ConsentString - You must provide an object when setting the global vendor list");if(!e.vendorListVersion||!Array.isArray(e.purposes)||!Array.isArray(e.vendors))throw new Error("ConsentString - The provided vendor list does not respect the schema from the IAB EUâ€™s GDPR Consent and Transparency Framework");this.vendorList={vendorListVersion:e.vendorListVersion,lastUpdated:e.lastUpdated,purposes:e.purposes,features:e.features,vendors:e.vendors.slice(0).sort(function(e,n){return e.id<n.id?-1:1})},this.vendorListVersion=e.vendorListVersion}},{key:"setCmpId",value:function(e){this.cmpId=e}},{key:"getCmpId",value:function(){return this.cmpId}},{key:"setCmpVersion",value:function(e){this.cmpVersion=e}},{key:"getCmpVersion",value:function(){return this.cmpVersion}},{key:"setConsentScreen",value:function(e){this.consentScreen=e}},{key:"getConsentScreen",value:function(){return this.consentScreen}},{key:"setConsentLanguage",value:function(e){if(!1===$.test(e))throw new Error("ConsentString - The consent language must be a two-letter ISO639-1 code (en, fr, de, etc.)");this.consentLanguage=e}},{key:"getConsentLanguage",value:function(){return this.consentLanguage}},{key:"setPurposesAllowed",value:function(e){this.allowedPurposeIds=e}},{key:"getPurposesAllowed",value:function(){return this.allowedPurposeIds}},{key:"setPurposeAllowed",value:function(e,n){var t=this.allowedPurposeIds.indexOf(e);!0===n?-1===t&&this.allowedPurposeIds.push(e):!1===n&&-1!==t&&this.allowedPurposeIds.splice(t,1)}},{key:"isPurposeAllowed",value:function(e){return-1!==this.allowedPurposeIds.indexOf(e)}},{key:"setVendorsAllowed",value:function(e){this.allowedVendorIds=e}},{key:"getVendorsAllowed",value:function(){return this.allowedVendorIds}},{key:"setVendorAllowed",value:function(e,n){var t=this.allowedVendorIds.indexOf(e);!0===n?-1===t&&this.allowedVendorIds.push(e):!1===n&&-1!==t&&this.allowedVendorIds.splice(t,1)}},{key:"isVendorAllowed",value:function(e){return-1!==this.allowedVendorIds.indexOf(e)}}],[{key:"decodeMetadataString",value:function(e){var n=z(e),t={};return G[n.version].metadataFields.forEach(function(e){t[e]=n[e]}),t}}]),Y)}.ConsentString,decodeConsentString:T,encodeConsentString:E}.ConsentString;function J(){this.otCommandQueue=[],this.isCMPReady=!1}(Z=new(J.prototype.getConsentString=function(e){return new H(e)},J.prototype.proccessQueue=function(){if(Z.isCMPReady=!0,Z.otCommandQueue)for(var e=0;e<Z.otCommandQueue.length;e++)Z.excuteAPI(Z.otCommandQueue[e].commandmethod,Z.otCommandQueue[e].parameter,Z.otCommandQueue[e].callback)},J.prototype.initializeCMP=function(){window.__cmp||(window.__cmp={}),Z.populateQueue(),Z.addFrame(),window.removeEventListener("message",window.receiveOTMessage),delete window.receiveOTMessage,(window.attachEvent||window.addEventListener)("message",function(e){Z.receiveMessage(e)},!1)},J.prototype.excuteAPI=function(e,n,t){if(t)switch(e){case"ping":window.OneTrust.getPingRequest(t);break;case"getVendorConsents":Z.isCMPReady?(n=Z.getvendorParamList(n))&&Array.isArray(n)&&0<n.length?window.OneTrust.getVendorConsentsRequest(t,n):window.OneTrust.getVendorConsentsRequest(t,null):((r={}).commandmethod=e,r.parameter=n,r.callback=t,Z.otCommandQueue.push(r));break;case"getConsentData":var r;Z.isCMPReady?window.OneTrust.getConsentDataRequest(t):((r={}).commandmethod=e,r.parameter=n,r.callback=t,Z.otCommandQueue.push(r))}},J.prototype.getvendorParamList=function(e){var n=[];if(e){if(Array.isArray(e))e.forEach(function(e){isNaN(e)||n.push(e)});else{if(isNaN(e))return;n.push(e)}return n}},J.prototype.populateQueue=function(){if(window.__cmp.a)for(var e=0;e<window.__cmp.a.length;e++){var n={},t=window.__cmp.a[e];n.commandmethod=t[0],n.parameter=t[1],n.callback=t[2],Z.otCommandQueue.push(n)}},J.prototype.receiveMessage=function(e){var n=e.data,t=e.origin,r=e.source;if(n&&n.__cmpCall){var o=n.__cmpCall.callId,i=n.__cmpCall.command,s=n.__cmpCall.parameter;Z.excuteAPI(i,s,function(e,n){r.postMessage({__cmpReturn:{returnValue:e,success:n,callId:o,command:i}},t)})}else n&&n.hasOwnProperty("OnetrustIABCookies")&&("blocked"===n.OnetrustIABCookies&&(n.OnetrustIABCookies=null),window.OneTrust.updateConsentFromCookies(n.OnetrustIABCookies))},J.prototype.addFrame=function(){if(!window.frames.__cmpLocator)if(document.body){var e=document.body,n=document.createElement("iframe");n.setAttribute("style","display:none"),n.name="__cmpLocator",n.setAttribute("title","CMP Locator"),e.appendChild(n)}else setTimeout(Z.addFrame,5)},J)).initializeCMP(),window.otIabModule={proccessQueue:Z.proccessQueue,excuteAPI:Z.excuteAPI,consentString:Z.getConsentString}}();
